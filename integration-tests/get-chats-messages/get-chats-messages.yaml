
- name: Retrieve-chats-success
  steps:
  - type: http
    method: GET
    url: "{{.baseurl}}/api/chats"
    headers:
      Authorization: "Bearer {{.jwt1}}"
    vars:
      chatId: 
        from: result.bodyjson.record[0].chatId
    assertions:
    - result.statuscode ShouldEqual 200

- name: Retrieve chats Unauthorized
  steps:
  - type: http
    method: GET
    url: "{{.baseurl}}/api/chats"
    assertions:
    - result.statuscode ShouldEqual 401
    - result.body.error.title ShouldEqual "Unauthorized"
    - result.body.error.code ShouldEqual "ERR-014"
    - result.body.error.message ShouldEqual "The request is unauthorized. Please login to your account."
    - result.body.error.http_status ShouldEqual 401

- name: Retrieve specific chat success
  steps:
  - type: http
    method: GET
    url: "{{.baseurl}}/chats/{{.Retrieve-chats-success.chatId}}?offset=&limit="
    headers:
      Authorization: "Bearer {{.jwt1}}"
    assertions:
    - result.statuscode ShouldEqual 200

- name: Retrieve specific chat Unauthorized
  steps:
  - type: http
    method: GET
    url: "{{.baseurl}}/chats/{{.chat}?offset=&limit="
    assertions:
    - result.statuscode ShouldEqual 401
    - result.body.error.title ShouldEqual "Unauthorized"
    - result.body.error.code ShouldEqual "ERR-014"
    - result.body.error.message ShouldEqual "The request is unauthorized. Please login to your account."
    - result.body.error.http_status ShouldEqual 401

- name: Retrieve specific chat Chat Not Found
  steps:
  - type: http
    method: GET
    url: "{{.baseurl}}/chats/nonexistent-chat-id?offset=&limit="
    headers:
      Authorization: "Bearer {{.jwt1}}"
    assertions:
    - result.statuscode ShouldEqual 404
    - result.body.error.title ShouldEqual "ChatNotFound"
    - result.body.error.code ShouldEqual "ERR-027"
    - result.body.error.message ShouldEqual "The chat was not found. Please check the chat ID and try again."
    - result.body.error.http_status ShouldEqual 404