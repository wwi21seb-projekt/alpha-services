name: Create Post
description: Testing creation of a post.

testcases:
- name: Post Creation Success
  steps:
  - type: http
    method: POST
    url: "{{.baseurl}}/posts"
    headers:
      Content-Type: application/json
      Authorization: "Bearer {{.jwt1}}"
    body: |
      {
        "content": "Some Content #arda",
        "picture": "",
        "location": {
            "longitude": 142.2,
            "latitude": 45.2,
            "accuracy": 39
        }
      }
    assertions:
    - result.statuscode ShouldEqual 201

- name: Post Creation Bad Request
  steps:
  - type: http
    method: POST
    url: "{{.baseurl}}/posts"
    headers:
      Content-Type: application/json
      Authorization: "Bearer {{.jwt1}}"
    body: |
      {
        "picture":" ",
        "location": {
            "longitude": 142.2,
            "latitude": -45.2,
            "accuracy": 39
        }
      }
    assertions:
    - result.statuscode ShouldEqual 400

- name: Post Creation Unauthorized
  steps:
  - type: http
    method: POST
    url: "{{.baseurl}}/posts"
    headers:
      Content-Type: application/json
      Authorization: "Bearer wrong{{.jwt1}}"
    body: |
      {
        "content": "Post ohne Repost und Location und eigener Location #hamster",
        "picture":" ",
        "location": {
            "longitude": 142.2,
            "latitude": -45.2,
            "accuracy": 39
        }
      }
    assertions:
    - result.statuscode ShouldEqual 401